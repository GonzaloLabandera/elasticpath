<?xml version="1.0"?>
<definitions xmlns="http://www.elasticpath.com/schema/rest/0.5">

	<family>
		<name>searches</name>

		<plan>
			<name>read-facets</name>
			<description><![CDATA[Retrieve the facets available for the search query to refine the search results.]]></description>
			<step>
				<description><![CDATA[Offer search to facets.]]></description>
				<start>offersearches.offer-search-result</start>
				<follow-link>facets</follow-link>
				<result>offersearches.facets</result>
			</step>
		</plan>

		<plan>
			<name>read-facet</name>
			<description><![CDATA[Retrieve the display name of the facet and facet value selector resource.]]></description>
			<step>
				<description><![CDATA[Retrieve a facet.]]></description>
				<start>offersearches.facets</start>
				<follow-link>element</follow-link>
				<result>offersearches.facet</result>
			</step>
		</plan>

		<plan>
			<name>facet-selector</name>
			<description>
				<![CDATA[
				Retrieve the facet values available for the selected facet and the facet selector resource to select the required facet values.
				You can refine the search results by selecting the required choices in multiple facets and retrieve the updated results using the offer search result resource.
				]]>
			</description>
			<step>
				<description><![CDATA[Retrieve the facet selector.]]></description>
				<start>offersearches.facet</start>
				<follow-link>facetselector</follow-link>
				<link-back>facet</link-back>
				<result>offersearches.facet-selector</result>
			</step>
			<step>
				<description><![CDATA[Retrieve a choice.]]></description>
				<start>offersearches.facet-selector</start>
				<follow-link>choice</follow-link>
				<link-back>selector</link-back>
				<result>offersearches.facet-selector-choice</result>
			</step>
			<step>
				<description><![CDATA[Retrieve a selected choice, if any.]]></description>
				<start>offersearches.facet-selector</start>
				<follow-link>chosen</follow-link>
				<link-back>selector</link-back>
				<result>offersearches.facet-selector-choice</result>
			</step>
			<step>
				<description><![CDATA[Retrieve updated offer search results.]]></description>
				<start>offersearches.facet-selector</start>
				<follow-link>offersearchresult</follow-link>
				<result>offersearches.offer-search-result</result>
			</step>
			<step>
				<description><![CDATA[Retrieve the details of the selected facet value.]]></description>
				<start>offersearches.facet-selector-choice</start>
				<follow-link>description</follow-link>
				<result>offersearches.facet-value</result>
			</step>
			<step>
				<description><![CDATA[Select a choice.]]></description>
				<start>offersearches.facet-selector-choice</start>
				<submit/>
				<to>offersearches.facet-selector-choice</to>
				<via-link>selectaction</via-link>
				<result>offersearches.facet-selector</result>
			</step>
		</plan>

		<plan>
			<name>read-facet-value</name>
			<description>
				<![CDATA[Retrieve the facet value and the number of offers corresponding to the facet value selection.]]>
			</description>
			<step>
				<description><![CDATA[Facet value.]]></description>
				<start>offersearches.facet-selector-choice</start>
				<follow-link>description</follow-link>
				<result>offersearches.facet-value</result>
			</step>
		</plan>

	</family>
</definitions>
