<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) Elastic Path Software Inc., 2019
  -->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>com.elasticpath.extensions</groupId>
		<artifactId>ext-cortex-ce-parent</artifactId>
		<version>0.0.0-SNAPSHOT</version>
	</parent>

	<artifactId>ext-cortex-webapp</artifactId>
	<version>0.0.0-SNAPSHOT</version>
	<packaging>war</packaging>
	<name>Cortex REST Web Application</name>
	<description>Extension Cortex CE Web Application</description>

	<properties>
		<!-- logback -->
		<ep.log.to.logback><![CDATA[<appender-ref ref="CONSOLE" /><appender-ref ref="FILE" />]]></ep.log.to.logback>
		<ep.log.level>INFO</ep.log.level>
		<ep.log.dir>target/logs</ep.log.dir>

		<!-- Controls which resource runtime is activated -->
		<resource-runtime>cortex</resource-runtime>

		<!-- Override slf4j -->
		<slf4j.version>1.7.26</slf4j.version>
		<spring-security-oauth2.osgi.version>2.3.3.RELEASE</spring-security-oauth2.osgi.version>
	</properties>

	<dependencies>
		<!-- RelOS webapp war overlay -->
		<dependency>
			<groupId>com.elasticpath.cortex</groupId>
			<artifactId>ep-relos-runtime-webapp</artifactId>
			<type>war</type>
		</dependency>

		<!-- Non-OSGi dependencies -->
		<dependency>
			<groupId>com.sun.xml.bind</groupId>
			<artifactId>jaxb-core</artifactId>
		</dependency>
		<!-- Drools -->
		<dependency>
			<groupId>org.mvel</groupId>
			<artifactId>mvel2</artifactId>
		</dependency>

		<!-- Connectivity API for external plugins -->
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>payment-plugin-connectivity</artifactId>
		</dependency>

		<!-- Bundles. Everything below this comment should be marked as "provided" -->

		<!-- Add Extension resources or Integration modules as maven dependencies here. -->
		<dependency>
			<groupId>com.elasticpath.extensions</groupId>
			<artifactId>ext-commerce-engine-wrapper</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.extensions.rest.repositories</groupId>
			<artifactId>ext-cortex-repositories</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Third party dependencies -->
		<dependency>
			<groupId>com.google.protobuf</groupId>
			<artifactId>protobuf-java</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.quartz</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.xstream</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.security.jacc</groupId>
			<artifactId>javax.security.jacc-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.sun.mail</groupId>
			<artifactId>javax.mail</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.glassfish</groupId>
			<artifactId>javax.json</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.aopalliance</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.cache</groupId>
			<artifactId>cache-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.commons</groupId>
			<artifactId>commons-lang3</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Spring -->
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-web</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-webmvc</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-context-support</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-tx</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-jdbc</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-jms</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-orm</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>commons-codec</groupId>
			<artifactId>commons-codec</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Spring Security -->
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-web</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-config</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.bundles</groupId>
			<artifactId>spring-security-oauth2-bundle</artifactId>
			<version>${spring-security-oauth2.osgi.version}</version>
			<scope>provided</scope>
		</dependency>

		<!-- Drools & KIE -->
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-persistence-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-persistence-jpa</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-compiler</artifactId>
			<scope>provided</scope>
			<exclusions>
				<exclusion>
					<groupId>com.thoughtworks.xstream</groupId>
					<artifactId>xstream</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		<dependency>
			<groupId>org.kie</groupId>
			<artifactId>kie-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie</groupId>
			<artifactId>kie-internal</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-project-datamodel-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-commons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-project-datamodel-commons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-maven-support</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-runtime-manager</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-audit</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-flow</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-human-task-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-human-task-workitems</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-query-jpa</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-persistence-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-persistence-jpa</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Commerce Engine -->
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-converters</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-persistence-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-messaging-camel</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-jms</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-customer-messaging</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-domain-messaging</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-catalog-message-handler</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-order-messaging</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-operational-insights-message-consumer</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-operational-insights-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-cache</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-caching</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>openjpa-osgi-wrapper</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>shipping-calculation-connectivity-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>shipping-calculation-connectivity-caching</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>shipping-calculation-plugin-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-bean-framework</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Events -->
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-resource-event-handlers-epcommerce</artifactId>
			<version>${cortex.ep.integration.version}</version>
			<scope>provided</scope>
		</dependency>

		<!-- Subject Attributes -->
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-customer-personalization-epcommerce</artifactId>
			<version>${cortex.ep.integration.version}</version>
			<scope>provided</scope>
		</dependency>

		<!-- OAuth2 EP Commerce Integration -->
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-rs-authentication-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-rs-authentication-spring-oauth2</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-rs-authentication-spring-oauth2-tokenstore-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-hds-support</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-rs-authorization-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Resource Servers -->
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-availabilities</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-carts</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-wishlists</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-items</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-offers</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-itemdefinitions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-offerdefinitions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-itemselections</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-orders</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-prices</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-offersearch</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-navigations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-addresses</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-profiles</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-registrations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-purchases</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-taxes</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-totals</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-coupons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-promotions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-searches</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-shipmentdetails</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-shipments</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-recommendations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-emails</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-geographies</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-references</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-discounts</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-data-policies</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-payment-methods</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-payment-instructions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-payment-instruments</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-lookups</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-accounts</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Pin tomcat version used in plugin -->
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-core</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-util</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-coyote</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jdbc</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-dbcp</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-servlet-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jsp-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jasper</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jasper-el</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-el-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-catalina</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-catalina-ha</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-annotations-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-i18n-es</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-i18n-fr</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-i18n-ja</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-juli</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-logging-juli</artifactId>
			<version>${tomcatLogging.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-logging-log4j</artifactId>
			<version>${tomcatLogging.version}</version>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>org.codehaus.janino</groupId>
			<artifactId>janino</artifactId>
			<version>3.0.8</version>
		</dependency>

		<!-- Health monitoring dependency -->
		<dependency>
			<groupId>com.elasticpath.extensions</groupId>
			<artifactId>ext-health-monitor</artifactId>
			<version>${project.version}</version>
		</dependency>
	</dependencies>

	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<executions>
					<!-- Helix Resources -->
					<execution>
						<id>copy-helix-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeGroupIds>
								com.elasticpath.rest.definitions,
								com.elasticpath.rest.resource.cortex,
								com.elasticpath.rest.integration.epcommerce,
								com.elasticpath.extensions.rest,
								com.elasticpath.extensions.rest.repositories,
								com.elasticpath.extensions.rest.resource
							</includeGroupIds>
							<excludeArtifactIds>
								ep-rest-definitions-schema,
								ep-resource-base-api,
								ep-resource-collections-api,
								ep-rest-repositories-epcommerce
							</excludeArtifactIds>
						</configuration>
					</execution>

					<!-- Commerce Engine -->
					<execution>
						<id>copy-commerce-engine-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								ep-bean-framework,
								ep-persistence-api,
								ep-converters,
								ep-messaging-camel,
								ep-jms,
								ep-core-customer-messaging,
								ep-operational-insights-message-consumer,
								ep-operational-insights-core,
								ep-core-domain-messaging,
								ep-cache,
								ep-core-caching,
								ep-core-order-messaging,
								openjpa-osgi-wrapper,
								org.apache.servicemix.bundles.ehcache,
								org.apache.bval.bundle,
								camel-core,
								camel-jackson,
								camel-jms,
								camel-spring
							</includeArtifactIds>
						</configuration>
					</execution>

					<!-- put OOTB or 3rd party plugin related bundles here -->
					<execution>
						<id>copy-plugin-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								<!-- Shipping Calculation API -->
								shipping-calculation-connectivity-api,
								shipping-calculation-connectivity-caching,
								<!-- Shipping Calculation SPI -->
								shipping-calculation-plugin-epcommerce
							</includeArtifactIds>
						</configuration>
					</execution>

					<execution>
						<id>copy-dependant-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								<!-- dependant: ep-rest-spi -->
								spring-security-oauth2-bundle,
							</includeArtifactIds>
						</configuration>
					</execution>
					<execution>
						<id>copy-cortex-deps-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								<!-- dependant: ep-rs-authentication-epcommerce -->
								javax.json
							</includeArtifactIds>
						</configuration>
					</execution>
					<!-- Blueprint / Spring - not in scope"provided" as they are needed by the webapp also-->
					<execution>
						<id>copy-blueprint-osgi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeGroupIds>
								javax.cache,
								org.apache.servicemix.bundles,
								org.drools,
								org.kie,
								org.jbpm,
								com.google.protobuf,
								com.sun.mail,
								commons-lang3,
								commons-codec,
								com.sun.xml.bind
							</includeGroupIds>
							<excludeArtifactIds>
								jaxb-impl
							</excludeArtifactIds>
						</configuration>
					</execution>

					<!-- Add additional modules as maven artifacts here. -->
					<execution>
						<id>copy-extra-cortex-artifacts</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory}</outputDirectory>
							<artifactItems>
								<artifactItem>
									<groupId>com.elasticpath.extensions</groupId>
									<artifactId>ext-commerce-engine-wrapper</artifactId>
								</artifactItem>
							</artifactItems>
						</configuration>
					</execution>
					<execution>
						<id>copy-log4j2-artifacts</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<artifactItems>
								<artifactItem>
									<groupId>org.apache.logging.log4j</groupId>
									<artifactId>log4j-api</artifactId>
								</artifactItem>
								<artifactItem>
									<groupId>org.apache.logging.log4j</groupId>
									<artifactId>log4j-core</artifactId>
								</artifactItem>
							</artifactItems>
						</configuration>
					</execution>
				</executions>
			</plugin>

			<!-- Do maven resource filtering on all the webapp resources -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-war-plugin</artifactId>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>manifest</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<webResources>
						<resource>
							<directory>src/main/webapp</directory>
							<filtering>true</filtering>
							<excludes>
								<exclude>META-INF/context.xml</exclude>
							</excludes>
						</resource>
						<resource>
							<directory>src/main/webapp</directory>
							<filtering>false</filtering>
							<includes>
								<includes>META-INF/context.xml</includes>
							</includes>
						</resource>
					</webResources>
					<escapeString>\</escapeString>
					<archive>
						<manifestEntries>
							<Implementation-Version>${ep.release.version}</Implementation-Version>
							<Implementation-Title>${project.name}</Implementation-Title>
							<Implementation-Vendor>${project.organization.name}</Implementation-Vendor>
						</manifestEntries>
					</archive>
				</configuration>
			</plugin>

			<!-- Include Cortex studio -->
			<plugin>
				<groupId>org.apache.tomcat.maven</groupId>
				<artifactId>tomcat8-maven-plugin</artifactId>
				<version>${tomcat.maven.plugin.version}</version>
				<configuration>
					<warSourceDirectory>${project.build.directory}/${project.artifactId}-${project.version}</warSourceDirectory>
					<path>${ep.cortex.contextUrl}</path>
					<port>${ep.cortex.tomcat.port.http}</port>
					<contextFile>${project.build.directory}/${project.build.finalName}/META-INF/context.xml</contextFile>
					<systemProperties>
						<felix.fileinstall.dir>
							${user.home}/ep/conf/cortex/permissions,${user.home}/ep/conf/cortex,/ep/conf/cortex/permissions,/ep/conf/cortex,/etc/ep/cortex/resources/config/permissions,/etc/ep/cortex/system/config
						</felix.fileinstall.dir>
						<org.aspectj.tracing.messages>true</org.aspectj.tracing.messages>
						<org.aspectj.tracing.factory>org.aspectj.weaver.tools.CommonsTraceFactory</org.aspectj.tracing.factory>
						<ep.search.replica.url>${ep.search.url}</ep.search.replica.url>
						<epdb.username>${epdb.username}</epdb.username>
						<epdb.password>${epdb.password}</epdb.password>
						<epdb.jdbc.driver>${epdb.jdbc.driver}</epdb.jdbc.driver>
						<epdb.data.source.factory>${epdb.data.source.factory}</epdb.data.source.factory>
						<epdb.url>${epdb.url}</epdb.url>
						<epdb.ro.url>${epdb.ro.url}</epdb.ro.url>
						<epdb.data.source.type>${epdb.data.source.type}</epdb.data.source.type>
						<epdb.validation.query>${epdb.validation.query}</epdb.validation.query>
						<epdb.validation.interval>${epdb.validation.interval}</epdb.validation.interval>
						<ep.tomcat.maxcachesize>${ep.tomcat.maxcachesize}</ep.tomcat.maxcachesize>
						<ep.jms.factory>${ep.jms.factory}</ep.jms.factory>
						<ep.jms.type>${ep.jms.type}</ep.jms.type>
						<ep.jms.url>${ep.jms.url}</ep.jms.url>
						<ep.plugins.folder>${project.basedir}/../../plugins/ext-plugin-config/target/plugins</ep.plugins.folder>
					</systemProperties>
					<webapps>
						<webapp>
							<groupId>com.elasticpath.rest.relos</groupId>
							<artifactId>ep-rest-studio</artifactId>
							<version>${api-platform.version}</version>
							<type>war</type>
							<contextPath>/studio</contextPath>
							<asWebapp>true</asWebapp>
						</webapp>
					</webapps>
				</configuration>
				<dependencies>
					<dependency>
						<groupId>org.apache.tomcat.embed</groupId>
						<artifactId>tomcat-embed-core</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-util</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-coyote</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jdbc</artifactId>
						<version>${tomcat.version}</version>
					</dependency>

					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-dbcp</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-servlet-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jsp-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jasper</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jasper-el</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-el-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-catalina</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-tribes</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-catalina-ha</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-annotations-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-i18n-es</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-i18n-fr</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-i18n-ja</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-juli</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat.embed</groupId>
						<artifactId>tomcat-embed-logging-juli</artifactId>
						<version>${tomcatLogging.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat.embed</groupId>
						<artifactId>tomcat-embed-logging-log4j</artifactId>
						<version>${tomcatLogging.version}</version>
					</dependency>
					<dependency>
						<groupId>${epdb.maven.groupId}</groupId>
						<artifactId>${epdb.maven.artifactId}</artifactId>
						<version>${epdb.maven.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.activemq</groupId>
						<artifactId>activemq-pool</artifactId>
						<version>${org.apache.activemq.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.activemq</groupId>
						<artifactId>activemq-jms-pool</artifactId>
						<version>${org.apache.activemq.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.activemq</groupId>
						<artifactId>activemq-client</artifactId>
						<version>${org.apache.activemq.version}</version>
					</dependency>
					<dependency>
						<groupId>commons-pool</groupId>
						<artifactId>commons-pool</artifactId>
						<version>${commons.pool.version}</version>
					</dependency>
					<dependency>
						<groupId>org.fusesource.hawtbuf</groupId>
						<artifactId>hawtbuf</artifactId>
						<version>${hawtbuf.version}</version>
					</dependency>
				</dependencies>
			</plugin>
		</plugins>
	</build>

	<profiles>
		<profile>
			<id>cortex-resources</id>
			<activation>
				<property>
					<name>resource-runtime</name>
					<value>cortex</value>
				</property>
			</activation>
			<dependencies>
				<!-- Converted Resources (legacy) -->
			</dependencies>
		</profile>
		<profile>
			<id>helix-resources</id>
			<activation>
				<property>
					<name>resource-runtime</name>
					<value>helix</value>
				</property>
			</activation>
			<dependencies>
				<!-- Converted Resources (new) -->
			</dependencies>
		</profile>
		<profile>
			<id>ep-developer</id>
			<properties>
				<bundle.environment>dev-bundles</bundle.environment>
				<bundle.location/>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-dependency-plugin</artifactId>
						<executions>
							<execution>
								<id>copy-development-OSGi-bundles</id>
								<phase>prepare-package</phase>
								<goals>
									<goal>copy</goal>
								</goals>
								<configuration>
									<outputDirectory>${war-bundle-directory-level-1}</outputDirectory>
									<artifactItems>
										<artifactItem>
											<groupId>org.apache.felix</groupId>
											<artifactId>org.apache.felix.shell</artifactId>
											<version>${felix.shell.version}</version>
										</artifactItem>
										<artifactItem>
											<groupId>org.apache.felix</groupId>
											<artifactId>org.apache.felix.shell.remote</artifactId>
											<version>${felix.shell.remote.version}</version>
										</artifactItem>
									</artifactItems>

								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>h2-local</id>
			<properties>
				<h2.port.tcp>9092</h2.port.tcp>
				<h2.port.web>8085</h2.port.web>
				<epdb.port>${h2.port.tcp}</epdb.port>
				<epdb.databasename>CORTEXDB</epdb.databasename>
				<epdb.datasource.classname>javax.sql.DataSource</epdb.datasource.classname>
				<epdb.password>sa</epdb.password>
			</properties>
			<dependencies>
				<dependency>
					<groupId>com.elasticpath.cortex.dce</groupId>
					<artifactId>cortex-dce-h2-database</artifactId>
					<version>0.0.0-SNAPSHOT</version>
					<type>zip</type>
					<scope>provided</scope>
				</dependency>
			</dependencies>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-dependency-plugin</artifactId>
						<executions>
							<execution>
								<phase>generate-resources</phase>
								<goals>
									<goal>unpack</goal>
								</goals>
								<configuration>
									<artifactItems>
										<artifactItem>
											<groupId>com.elasticpath.cortex.dce</groupId>
											<artifactId>cortex-dce-h2-database</artifactId>
											<version>0.0.0-SNAPSHOT</version>
											<overWrite>true</overWrite>
											<type>zip</type>
											<outputDirectory>${project.build.directory}/database</outputDirectory>
										</artifactItem>
									</artifactItems>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>exec-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>start-h2-embedded-tcp</id>
								<goals>
									<goal>java</goal>
								</goals>
								<phase>prepare-package</phase>
								<configuration>
									<cleanupDaemonThreads>false</cleanupDaemonThreads>
									<includePluginDependencies>true</includePluginDependencies>
									<mainClass>org.h2.tools.Server</mainClass>
									<arguments>
										<argument>-tcpDaemon</argument>
										<argument>-tcp</argument>
										<argument>-webDaemon</argument>
										<argument>-web</argument>
										<argument>-baseDir</argument>
										<argument>${project.build.directory}/database</argument>
										<argument>-tcpPort</argument>
										<argument>${h2.port.tcp}</argument>
										<argument>-webPort</argument>
										<argument>${h2.port.web}</argument>
									</arguments>
								</configuration>
							</execution>
							<execution>
								<id>stop-h2-embedded-tcp</id>
								<goals>
									<goal>java</goal>
								</goals>
								<phase>install</phase>
								<configuration>
									<includePluginDependencies>true</includePluginDependencies>
									<mainClass>org.h2.tools.Server</mainClass>
									<arguments>
										<argument>-tcpShutdown</argument>
										<argument>tcp://localhost:${h2.port.tcp}</argument>
									</arguments>
								</configuration>
							</execution>
						</executions>
						<dependencies>
							<dependency>
								<groupId>${epdb.maven.groupId}</groupId>
								<artifactId>${epdb.maven.artifactId}</artifactId>
								<version>${epdb.maven.version}</version>
							</dependency>
						</dependencies>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>m2e-tomcat-context</id>
			<activation>
				<property>
					<name>m2e.version</name>
				</property>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-war-plugin</artifactId>
						<executions>
							<execution>
								<phase>package</phase>
								<goals>
									<goal>manifest</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<webResources>
								<resource>
									<directory>src/main/webapp</directory>
									<filtering>true</filtering>
								</resource>
							</webResources>
							<archive>
								<manifestEntries>
									<Implementation-Version>${ep.release.version}</Implementation-Version>
									<Implementation-Title>${project.name}</Implementation-Title>
									<Implementation-Vendor>${project.organization.name}</Implementation-Vendor>
								</manifestEntries>
							</archive>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.eclipse.m2e</groupId>
						<artifactId>lifecycle-mapping</artifactId>
						<version>${lifecycle-mapping-plugin.version}</version>
						<configuration>
							<lifecycleMappingMetadata>
								<pluginExecutions>
									<pluginExecution>
										<pluginExecutionFilter>
											<groupId>org.apache.maven.plugins</groupId>
											<artifactId>maven-dependency-plugin</artifactId>
											<versionRange>[2.8,)</versionRange>
											<goals>
												<goal>unpack-dependencies</goal>
											</goals>
										</pluginExecutionFilter>
										<action>
											<ignore/>
										</action>
									</pluginExecution>
								</pluginExecutions>
							</lifecycleMappingMetadata>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>

	</profiles>

	<distributionManagement>
		<repository>
			<id>ep-releases</id>
			<url>${ep.releases.repository.url}</url>
		</repository>
		<snapshotRepository>
			<id>ep-snapshots</id>
			<url>${ep.snapshots.repository.url}</url>
		</snapshotRepository>
	</distributionManagement>
</project>
