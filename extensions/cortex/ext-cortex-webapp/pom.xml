<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>com.elasticpath.extensions</groupId>
		<artifactId>ext-cortex-ce-parent</artifactId>
		<version>0.0.0-SNAPSHOT</version>
	</parent>

	<artifactId>ext-cortex-webapp</artifactId>
	<version>0.0.0-SNAPSHOT</version>
	<packaging>war</packaging>
	<name>Extension Cortex CE REST Webapp</name>
	<description>Extension Cortex CE Web Application</description>

	<properties>
		<!-- logback -->
		<ep.log.to.logback><![CDATA[<appender-ref ref="CONSOLE" /><appender-ref ref="FILE" />]]></ep.log.to.logback>
		<ep.log.level>INFO</ep.log.level>
		<ep.log.dir>target/logs</ep.log.dir>

		<!-- Controls which resource runtime is activated -->
		<resource-runtime>cortex</resource-runtime>

		<!-- Override slf4j -->
		<slf4j.version>1.7.25</slf4j.version>
		<spring-security-oauth2.osgi.version>2.3.3.RELEASE</spring-security-oauth2.osgi.version>
	</properties>

	<dependencies>

		<!-- Add Extension resources or Integration modules as maven dependencies here. -->
		<dependency>
			<groupId>com.elasticpath.extensions</groupId>
			<artifactId>ext-commerce-engine-wrapper</artifactId>
			<version>${project.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.platforms</groupId>
			<artifactId>platforms-commons</artifactId>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.platforms</groupId>
			<artifactId>ep-relos-webapp-housing</artifactId>
		</dependency>
		<dependency>
			<groupId>javax.validation</groupId>
			<artifactId>validation-api</artifactId>
		</dependency>
		<dependency>
			<groupId>com.sun.xml.bind</groupId>
			<artifactId>jaxb-core</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.framework</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.http.proxy</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.geronimo.specs</groupId>
			<artifactId>geronimo-jms_1.1_spec</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.geronimo.specs</groupId>
			<artifactId>geronimo-j2ee-management_1.1_spec</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.google.protobuf</groupId>
			<artifactId>protobuf-java</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Spring -->
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-core</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-beans</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-context</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-expression</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-web</artifactId>
		</dependency>

		<!-- logging -->
		<dependency>
			<groupId>ch.qos.logback</groupId>
			<artifactId>logback-classic</artifactId>
		</dependency>
		<dependency>
			<groupId>ch.qos.logback</groupId>
			<artifactId>logback-core</artifactId>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos</groupId>
			<artifactId>ep-relos-logback-config</artifactId>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>jcl-over-slf4j</artifactId>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>log4j-over-slf4j</artifactId>
			<version>${slf4j.version}</version>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-api</artifactId>
			<version>${slf4j.version}</version>
		</dependency>
		<dependency>
			<groupId>org.osgi</groupId>
			<artifactId>org.osgi.service.log</artifactId>
			<version>1.3.0</version>
		</dependency>
		<!-- exclude log4j from WEB-INF/lib by marking them as provided. -->
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<scope>provided</scope>
		</dependency>
		<!-- Non-OSGi Drools dependencies -->
		<dependency>
			<groupId>org.mvel</groupId>
			<artifactId>mvel2</artifactId>
		</dependency>

		<!-- Bundles. Everything below this comment should be marked as "provided" -->
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.aspectj</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.quartz</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.thoughtworks.xstream</groupId>
			<artifactId>xstream</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.cache</groupId>
			<artifactId>cache-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.security.jacc</groupId>
			<artifactId>javax.security.jacc-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.sun.mail</groupId>
			<artifactId>javax.mail</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.glassfish</groupId>
			<artifactId>javax.json</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.inventory</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.scr</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.configadmin</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.metatype</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.fileinstall</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.http.api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.http.bridge</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.http.servlet-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.eventadmin</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.ws.rs</groupId>
			<artifactId>javax.ws.rs-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax.annotation</groupId>
			<artifactId>javax.annotation-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.commons</groupId>
			<artifactId>commons-lang3</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.google.guava</groupId>
			<artifactId>guava</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.uuid</groupId>
			<artifactId>java-uuid-generator</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>net.sourceforge.jregex</groupId>
			<artifactId>jregex</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>io.reactivex.rxjava2</groupId>
			<artifactId>rxjava</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.google.inject</groupId>
			<artifactId>guice</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.google.inject.extensions</groupId>
			<artifactId>guice-multibindings</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.eclipse.sisu</groupId>
			<artifactId>org.eclipse.sisu.inject</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.ops4j</groupId>
			<artifactId>peaberry</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.aopalliance</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Spring -->
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-context-support</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-aop</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-webmvc</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-tx</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-jdbc</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-jms</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-ldap</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.springframework.batch</groupId>
			<artifactId>spring-batch-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.springframework.batch</groupId>
			<artifactId>spring-batch-infrastructure</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>commons-codec</groupId>
			<artifactId>commons-codec</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>commons-pool</groupId>
			<artifactId>commons-pool</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>commons-lang</groupId>
			<artifactId>commons-lang</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Spring Security -->
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-web</artifactId>
			<scope>provided</scope>
			</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-config</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.spring-security-ldap</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.bundles</groupId>
			<artifactId>spring-security-oauth2-bundle</artifactId>
			<version>${spring-security-oauth2.osgi.version}</version>
			<scope>provided</scope>
		</dependency>

		<!-- Drools & KIE -->
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-persistence-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-persistence-jpa</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.drools</groupId>
			<artifactId>drools-compiler</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie</groupId>
			<artifactId>kie-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie</groupId>
			<artifactId>kie-internal</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-project-datamodel-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-commons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-project-datamodel-commons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.kie.soup</groupId>
			<artifactId>kie-soup-maven-support</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-runtime-manager</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-audit</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-flow</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-human-task-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-human-task-workitems</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-query-jpa</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-persistence-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.jbpm</groupId>
			<artifactId>jbpm-persistence-jpa</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>cxf-uritemplate-utils</artifactId>
			<scope>provided</scope>
		</dependency>
		<!-- OSGi webconsole - start -->
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.webconsole</artifactId>
			<scope>provided</scope>
		</dependency>
		<!-- the following artifacts are webconsole dependencies which can be removed on webconsole removal  -->
		<dependency>
			<groupId>commons-fileupload</groupId>
			<artifactId>commons-fileupload</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.json</groupId>
			<artifactId>com.springsource.org.json</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>commons-io</groupId>
			<artifactId>commons-io</artifactId>
			<scope>provided</scope>
		</dependency>
		<!-- webconsole plugins -->
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.webconsole.plugins.ds</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.webconsole.plugins.event</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.webconsole.plugins.memoryusage</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.apache.felix.webconsole.plugins.packageadmin</artifactId>
			<scope>provided</scope>
		</dependency>
		<!-- OSGi webconsole - end -->

		<!-- OSGi bundled versions -->
		<dependency>
			<groupId>org.aopalliance</groupId>
			<artifactId>com.springsource.org.aopalliance</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Gemini blueprint -->
		<dependency>
			<groupId>org.eclipse.gemini.blueprint</groupId>
			<artifactId>gemini-blueprint-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.eclipse.gemini.blueprint</groupId>
			<artifactId>gemini-blueprint-io</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.eclipse.gemini.blueprint</groupId>
			<artifactId>gemini-blueprint-extender</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>osgi-over-slf4j</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Helix -->
		<dependency>
			<groupId>com.elasticpath.rest.helix</groupId>
			<artifactId>helix-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.helix</groupId>
			<artifactId>helix-data-injectors</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.helix</groupId>
			<artifactId>helix-commons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.helix</groupId>
			<artifactId>helix-validator</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.helix</groupId>
			<artifactId>helix-runtime</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.helix</groupId>
			<artifactId>helix-resource-bootstrap</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Commerce Engine -->
		<dependency>
			<groupId>com.elasticpath.extensions.rest.repositories</groupId>
			<artifactId>ext-cortex-repositories</artifactId>
			<scope>provided</scope>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-converters</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-persistence-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-messaging-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-messaging-camel</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-jms</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-customer-messaging</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-order-messaging</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-cache</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-core-caching</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>openjpa-osgi-wrapper</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>shipping-calculation-connectivity-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>shipping-calculation-connectivity-caching</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>shipping-calculation-plugin-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath</groupId>
			<artifactId>ep-bean-framework</artifactId>
			<scope>provided</scope>
		</dependency>
		<!-- Subject -->
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs.subject</groupId>
			<artifactId>ep-rs-subject-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs.subject</groupId>
			<artifactId>ep-rs-subject-impl</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-rs-subject-lookup-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Events -->
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs.events</groupId>
			<artifactId>ep-rs-events-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs.events</groupId>
			<artifactId>ep-rs-events-impl</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-resource-event-handlers-epcommerce</artifactId>
			<version>${cortex.ep.integration.version}</version>
			<scope>provided</scope>
		</dependency>


		<!-- Subject Attributes -->
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-customer-personalization-epcommerce</artifactId>
			<version>${cortex.ep.integration.version}</version>
			<scope>provided</scope>
		</dependency>

		<!-- RelOS -->
		<dependency>
			<groupId>com.elasticpath.rest.relos</groupId>
			<artifactId>ep-relos-system-ready</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos</groupId>
			<artifactId>ep-relos-kernel</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-root-resource</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-spi</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-spi-impl</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-identifiers</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-commons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-bridge</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-bridge-common</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-hal-support</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-jaxrs-resource-provider</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-jersey-integration</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-json-jackson</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-external</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-rest-resource-blueprint-extender</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest</groupId>
			<artifactId>ep-dispatch-extender</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.relos.rs</groupId>
			<artifactId>ep-rs-healthcheck</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- jackson -->
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-annotations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.jaxrs</groupId>
			<artifactId>jackson-jaxrs-base</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.jaxrs</groupId>
			<artifactId>jackson-jaxrs-json-provider</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.module</groupId>
			<artifactId>jackson-module-jaxb-annotations</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- jersey -->
		<dependency>
			<groupId>org.glassfish.jersey.containers</groupId>
			<artifactId>jersey-container-servlet</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.glassfish.jersey.inject</groupId>
			<artifactId>jersey-hk2</artifactId>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>org.apache.shiro</groupId>
			<artifactId>shiro-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>io.dropwizard.metrics</groupId>
			<artifactId>metrics-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>io.dropwizard.metrics</groupId>
			<artifactId>metrics-healthchecks</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>io.dropwizard.metrics</groupId>
			<artifactId>metrics-graphite</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.msgpack</groupId>
			<artifactId>msgpack-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.javassist</groupId>
			<artifactId>javassist</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Security -->
		<dependency>
			<groupId>com.elasticpath.bundles</groupId>
			<artifactId>esapi-osgi-bundle</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Camel -->
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-jackson</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-jms</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-spring</artifactId>
			<scope>provided</scope>

		</dependency>

		<!-- Resource Servers -->
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-availabilities</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-carts</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-wishlists</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-items</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-offers</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-itemdefinitions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-offerdefinitions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-itemselections</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-orders</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-resource-paymentmethods-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-prices</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-offersearch</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-navigations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-addresses</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-profiles</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-registrations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-purchases</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-taxes</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-totals</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-coupons</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-promotions</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-searches</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-shipmentdetails</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-shipments</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-recommendations</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
			<artifactId>ep-resource-payment-tokens-epcommerce</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-emails</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-geographies</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-discounts</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-data-policies</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.elasticpath.rest.resource.cortex</groupId>
			<artifactId>ep-resource-lookups</artifactId>
			<scope>provided</scope>
		</dependency>

		<!-- Pin tomcat version used in plugin -->
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-core</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-util</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-coyote</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jdbc</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-dbcp</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-servlet-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jsp-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jasper</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-jasper-el</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-el-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-catalina</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-catalina-ha</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-annotations-api</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-i18n-es</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-i18n-fr</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-i18n-ja</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat</groupId>
			<artifactId>tomcat-juli</artifactId>
			<version>${tomcat.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-logging-juli</artifactId>
			<version>${tomcatLogging.version}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.apache.tomcat.embed</groupId>
			<artifactId>tomcat-embed-logging-log4j</artifactId>
			<version>${tomcatLogging.version}</version>
			<scope>provided</scope>
		</dependency>

		<dependency>
			<groupId>org.codehaus.janino</groupId>
			<artifactId>janino</artifactId>
			<version>3.0.8</version>
		</dependency>

		<!-- Health monitoring dependency -->
		<dependency>
			<groupId>com.elasticpath.extensions</groupId>
			<artifactId>ext-health-monitor</artifactId>
			<version>${project.version}</version>
		</dependency>
	</dependencies>

	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<executions>
					<!-- Helix Resources -->
					<execution>
						<id>copy-helix-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-4}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeGroupIds>
								com.elasticpath.rest.definitions,
								com.elasticpath.rest.resource.cortex,
								com.elasticpath.rest.integration.epcommerce,
								com.elasticpath.extensions.rest.repositories,
								com.elasticpath.extensions.rest.resource

							</includeGroupIds>
							<excludeArtifactIds>
								ep-resource-collections-api,
								ep-rest-repositories-epcommerce
							</excludeArtifactIds>
						</configuration>
					</execution>

					<!-- Resource Exceptions -->
					<execution>
						<id>copy-resource-exceptions</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								ep-resource-collections-api
							</includeArtifactIds>
						</configuration>
					</execution>

					<!-- Cortex Bundles -->
					<execution>
						<id>copy-cortex-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeGroupIds>
								com.elasticpath.rest,
								org.glassfish,
								javax.annotation,
								javax.ws.rs,
								com.fasterxml.jackson,
								com.fasterxml.uuid,
								io.reactivex.rxjava2,
								org.reactivestreams
							</includeGroupIds>
							<excludeGroupIds>
								com.elasticpath.rest.definitions,
								com.elasticpath.rest.resource.cortex,
								com.elasticpath.rest.integration.epcommerce,
								org.glassfish.web,
								com.fasterxml.jackson.dataformat
							</excludeGroupIds>
						</configuration>
					</execution>

					<!-- Commerce Engine -->
					<execution>
						<id>copy-commerce-engine-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								${ep-commerce-engine-wrapper-artifact-id},
								ep-bean-framework,
								ep-persistence-api,
								ep-converters,
								ep-messaging-api,
								ep-messaging-camel,
								ep-jms,
								ep-core-customer-messaging,
								ep-cache,
								ep-core-caching,
								ep-core-order-messaging,
								openjpa-osgi-wrapper,
								org.apache.servicemix.bundles.ehcache,
								org.apache.bval.bundle,
								commons-beanutils,
								org.apache.servicemix.bundles.commons-collections,
								camel-core,
								camel-jackson,
								camel-jms,
								camel-spring
							</includeArtifactIds>
						</configuration>
					</execution>

					<!-- put OOTB or 3rd party plugin related bundles here -->
					<execution>
						<id>copy-plugin-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								<!-- Shipping Calculation API -->
								shipping-calculation-connectivity-api,
								shipping-calculation-connectivity-caching,

								<!-- Shipping Calculation SPI -->
								shipping-calculation-plugin-epcommerce,
							</includeArtifactIds>
						</configuration>
					</execution>

					<execution>
						<id>copy-dependant-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								<!-- shared libs -->
								cache-api,
								org.apache.servicemix.bundles.aspectj,
								commons-lang3,
								guava,
								org.eclipse.sisu.inject,
								guice,
								guice-multibindings,
								org.apache.servicemix.bundles.aopalliance,
								peaberry,
								javassist,
								jregex,
								rxjava,
								esapi-osgi-bundle,
								<!-- dependant: ep-rest-commons -->
								cxf-uritemplate-utils,
								<!-- dependant: ep-relos-kernel -->
								rxjava,
								metrics-core,
								metrics-healthchecks,
								metrics-graphite,
								<!-- dependant: ep-relos-kernel -->
								shiro-core,
								<!-- dependant: ep-rest-spi -->
								msgpack-core,
								spring-security-oauth2-bundle,
								<!-- dependant: ep-rs-authentication-epcommerce -->
								javax.json
							</includeArtifactIds>
						</configuration>
					</execution>
					<!-- logging - not in scope"provided" as they are needed by the webapp also-->
					<execution>
						<id>copy-logging-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeArtifactIds>
								jcl-over-slf4j,
								log4j-over-slf4j,
								org.osgi.service.log,
								osgi-over-slf4j
							</includeArtifactIds>
						</configuration>
					</execution>

					<!-- Blueprint / Spring - not in scope"provided" as they are needed by the webapp also-->
					<execution>
						<id>copy-blueprint-osgi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeGroupIds>
								org.apache.servicemix.bundles,
								org.springframework.security,
								org.drools,
								org.springframework.batch,
								org.kie,
								org.kie.soup,
								org.jbpm,
								com.thoughtworks.xstream,
								com.google.protobuf,
								com.sun.mail,
								commons-codec,
								commons-lang,
								commons-pool,
								com.sun.xml.bind,
								org.aopalliance,
								org.eclipse.gemini
							</includeGroupIds>
							<excludeArtifactIds>
								jaxb-impl
							</excludeArtifactIds>
						</configuration>
					</execution>

					<!-- osgi container stuff -->
					<execution>
						<id>copy-osgi-base-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeScope>provided</includeScope>
							<includeGroupIds>
								org.apache.felix
							</includeGroupIds>
						</configuration>
					</execution>

					<!-- OSGi webconsole -->
					<execution>
						<id>copy-osgi-webconsole-OSGi-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<excludeTransitive>true</excludeTransitive>
							<includeScope>provided</includeScope>
							<includeArtifactIds>
								org.apache.felix.webconsole,
								commons-io,
								commons-fileupload,
								com.springsource.org.json
							</includeArtifactIds>
						</configuration>
					</execution>

					<!-- Add Extension Resource Bundles -->
					<execution>
						<id>copy-cortex-resource-bundles</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-4}</outputDirectory>
							<includeScope>provided</includeScope>
							<includeGroupIds>
								com.elasticpath.extensions.rest
							</includeGroupIds>
						</configuration>
					</execution>

					<!-- Add additional modules as maven artifacts here. -->
					<execution>
						<id>copy-extra-cortex-artifacts</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy</goal>
						</goals>
						<configuration>
							<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
							<artifactItems>
								<artifactItem>
									<groupId>com.elasticpath.extensions</groupId>
									<artifactId>ext-commerce-engine-wrapper</artifactId>
								</artifactItem>
							</artifactItems>
						</configuration>
					</execution>
				</executions>
			</plugin>

			<!-- Do maven resource filtering on all the webapp resources -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-war-plugin</artifactId>
				<configuration>
					<webResources>
						<resource>
							<directory>src/main/webapp</directory>
							<filtering>true</filtering>
						</resource>
					</webResources>
					<escapeString>\</escapeString>
				</configuration>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-resources-plugin</artifactId>
				<executions>
					<execution>
						<id>create-tomcat-context-xml</id>
						<phase>process-resources</phase>
						<goals>
							<goal>copy-resources</goal>
						</goals>
						<configuration>
							<resources>
								<resource>
									<directory>src/tomcat</directory>
									<filtering>true</filtering>
									<includes>
										<include>context.xml</include>
									</includes>
								</resource>
							</resources>
							<outputDirectory>${project.build.directory}/tomcatconf</outputDirectory>
						</configuration>
					</execution>
				</executions>
				<configuration>
					<escapeString>\</escapeString>
				</configuration>
			</plugin>

			<!-- Include Cortex studio -->
			<plugin>
				<groupId>org.apache.tomcat.maven</groupId>
				<artifactId>tomcat8-maven-plugin</artifactId>
				<version>${tomcat.maven.plugin.version}</version>
				<configuration>
					<warSourceDirectory>${project.build.directory}/${project.artifactId}-${project.version}</warSourceDirectory>
					<path>${ep.cortex.contextUrl}</path>
					<port>${ep.cortex.tomcat.port.http}</port>
					<contextFile>${project.build.directory}/tomcatconf/context.xml</contextFile>
					<systemProperties>
						<felix.fileinstall.dir>
							${user.home}/ep/conf/cortex/permissions,${user.home}/ep/conf/cortex,/ep/conf/cortex/permissions,/ep/conf/cortex,/etc/ep/cortex/resources/config/permissions,/etc/ep/cortex/system/config
						</felix.fileinstall.dir>
						<org.aspectj.tracing.messages>true</org.aspectj.tracing.messages>
						<org.aspectj.tracing.factory>org.aspectj.weaver.tools.CommonsTraceFactory</org.aspectj.tracing.factory>
						<ep.search.default.url>${ep.search.url}</ep.search.default.url>
					</systemProperties>
					<webapps>
						<webapp>
							<groupId>com.elasticpath.rest.relos</groupId>
							<artifactId>ep-rest-studio</artifactId>
							<version>${api-platform.version}</version>
							<type>war</type>
							<contextPath>/studio</contextPath>
							<asWebapp>true</asWebapp>
						</webapp>
					</webapps>
				</configuration>
				<dependencies>
					<dependency>
						<groupId>org.apache.tomcat.embed</groupId>
						<artifactId>tomcat-embed-core</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-util</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-coyote</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jdbc</artifactId>
						<version>${tomcat.version}</version>
					</dependency>

					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-dbcp</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-servlet-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jsp-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jasper</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-jasper-el</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-el-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-catalina</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-tribes</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-catalina-ha</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-annotations-api</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-i18n-es</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-i18n-fr</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-i18n-ja</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat</groupId>
						<artifactId>tomcat-juli</artifactId>
						<version>${tomcat.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat.embed</groupId>
						<artifactId>tomcat-embed-logging-juli</artifactId>
						<version>${tomcatLogging.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.tomcat.embed</groupId>
						<artifactId>tomcat-embed-logging-log4j</artifactId>
						<version>${tomcatLogging.version}</version>
					</dependency>
					<dependency>
						<groupId>${epdb.maven.groupId}</groupId>
						<artifactId>${epdb.maven.artifactId}</artifactId>
						<version>${epdb.maven.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.activemq</groupId>
						<artifactId>activemq-pool</artifactId>
						<version>${org.apache.activemq.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.activemq</groupId>
						<artifactId>activemq-jms-pool</artifactId>
						<version>${org.apache.activemq.version}</version>
					</dependency>
					<dependency>
						<groupId>org.apache.activemq</groupId>
						<artifactId>activemq-client</artifactId>
						<version>${org.apache.activemq.version}</version>
					</dependency>
					<dependency>
						<groupId>commons-pool</groupId>
						<artifactId>commons-pool</artifactId>
						<version>${commons.pool.version}</version>
					</dependency>
					<dependency>
						<groupId>org.fusesource.hawtbuf</groupId>
						<artifactId>hawtbuf</artifactId>
						<version>${hawtbuf.version}</version>
					</dependency>
				</dependencies>
			</plugin>
		</plugins>
	</build>

	<profiles>
		<profile>
			<id>cortex-resources</id>
			<activation>
				<property>
					<name>resource-runtime</name>
					<value>cortex</value>
				</property>
			</activation>
			<dependencies>
				<!-- Converted Resources (legacy) -->
			</dependencies>
		</profile>
		<profile>
			<id>helix-resources</id>
			<activation>
				<property>
					<name>resource-runtime</name>
					<value>helix</value>
				</property>
			</activation>
			<dependencies>
				<!-- Converted Resources (new) -->
			</dependencies>
		</profile>
		<profile>
			<id>ep-developer</id>
			<properties>
				<bundle.environment>dev-bundles</bundle.environment>
				<bundle.location/>
			</properties>
			<build>
				<pluginManagement>
					<plugins>
						<plugin>
							<groupId>org.apache.maven.plugins</groupId>
							<artifactId>maven-dependency-plugin</artifactId>
							<executions>
								<execution>
									<id>copy-development-OSGi-bundles</id>
									<phase>prepare-package</phase>
									<goals>
										<goal>copy</goal>
									</goals>
									<configuration>
										<outputDirectory>${war-bundle-directory-level-2}</outputDirectory>
										<artifactItems>
											<artifactItem>
												<groupId>org.apache.felix</groupId>
												<artifactId>org.apache.felix.shell</artifactId>
												<version>${felix.shell.version}</version>
											</artifactItem>
											<artifactItem>
												<groupId>org.apache.felix</groupId>
												<artifactId>org.apache.felix.shell.remote</artifactId>
												<version>${felix.shell.remote.version}</version>
											</artifactItem>
										</artifactItems>
									</configuration>
								</execution>
							</executions>
						</plugin>
					</plugins>
				</pluginManagement>
			</build>
		</profile>

		<profile>
			<id>h2-local</id>
			<properties>
				<h2.port.tcp>9092</h2.port.tcp>
				<h2.port.web>8085</h2.port.web>
				<epdb.port>${h2.port.tcp}</epdb.port>
				<epdb.databasename>CORTEXDB</epdb.databasename>
				<epdb.datasource.classname>javax.sql.DataSource</epdb.datasource.classname>
				<epdb.password>sa</epdb.password>
			</properties>
			<dependencies>
				<dependency>
					<groupId>com.elasticpath.cortex.dce</groupId>
					<artifactId>cortex-dce-h2-database</artifactId>
					<version>0.0.0-SNAPSHOT</version>
					<type>zip</type>
					<scope>provided</scope>
				</dependency>
			</dependencies>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-dependency-plugin</artifactId>
						<executions>
							<execution>
								<phase>generate-resources</phase>
								<goals>
									<goal>unpack</goal>
								</goals>
								<configuration>
									<artifactItems>
										<artifactItem>
											<groupId>com.elasticpath.cortex.dce</groupId>
											<artifactId>cortex-dce-h2-database</artifactId>
											<version>0.0.0-SNAPSHOT</version>
											<overWrite>true</overWrite>
											<type>zip</type>
											<outputDirectory>${project.build.directory}/database</outputDirectory>
										</artifactItem>
									</artifactItems>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>exec-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>start-h2-embedded-tcp</id>
								<goals>
									<goal>java</goal>
								</goals>
								<phase>prepare-package</phase>
								<configuration>
									<cleanupDaemonThreads>false</cleanupDaemonThreads>
									<includePluginDependencies>true</includePluginDependencies>
									<mainClass>org.h2.tools.Server</mainClass>
									<arguments>
										<argument>-tcpDaemon</argument>
										<argument>-tcp</argument>
										<argument>-webDaemon</argument>
										<argument>-web</argument>
										<argument>-baseDir</argument>
										<argument>${project.build.directory}/database</argument>
										<argument>-tcpPort</argument>
										<argument>${h2.port.tcp}</argument>
										<argument>-webPort</argument>
										<argument>${h2.port.web}</argument>
									</arguments>
								</configuration>
							</execution>
							<execution>
								<id>stop-h2-embedded-tcp</id>
								<goals>
									<goal>java</goal>
								</goals>
								<phase>install</phase>
								<configuration>
									<includePluginDependencies>true</includePluginDependencies>
									<mainClass>org.h2.tools.Server</mainClass>
									<arguments>
										<argument>-tcpShutdown</argument>
										<argument>tcp://localhost:${h2.port.tcp}</argument>
									</arguments>
								</configuration>
							</execution>
						</executions>
						<dependencies>
							<dependency>
								<groupId>${epdb.maven.groupId}</groupId>
								<artifactId>${epdb.maven.artifactId}</artifactId>
								<version>${epdb.maven.version}</version>
							</dependency>
						</dependencies>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>m2e-tomcat-context</id>
			<activation>
				<property>
					<name>m2e.version</name>
				</property>
			</activation>
			<build>
				<pluginManagement>
					<plugins>
						<plugin>
							<groupId>org.apache.maven.plugins</groupId>
							<artifactId>maven-war-plugin</artifactId>
							<configuration>
								<webResources>
									<resource>
										<directory>src/main/webapp</directory>
										<filtering>true</filtering>
									</resource>
									<resource>
										<directory>src/tomcat</directory>
										<targetPath>META-INF</targetPath>
										<filtering>true</filtering>
									</resource>
								</webResources>
							</configuration>
						</plugin>
						<plugin>
							<groupId>org.eclipse.m2e</groupId>
							<artifactId>lifecycle-mapping</artifactId>
							<version>${lifecycle-mapping-plugin.version}</version>
							<configuration>
								<lifecycleMappingMetadata>
									<pluginExecutions>
										<pluginExecution>
											<pluginExecutionFilter>
												<groupId>org.apache.maven.plugins</groupId>
												<artifactId>maven-dependency-plugin</artifactId>
												<versionRange>[2.8,)</versionRange>
												<goals>
													<goal>unpack-dependencies</goal>
												</goals>
											</pluginExecutionFilter>
											<action>
												<ignore/>
											</action>
										</pluginExecution>
									</pluginExecutions>
								</lifecycleMappingMetadata>
							</configuration>
						</plugin>
					</plugins>
				</pluginManagement>
			</build>
		</profile>
		<profile>
			<id>with-oauth2-resource</id>
			<dependencies>
				<dependency>
					<groupId>com.elasticpath.rest.relos.rs.authentication</groupId>
					<artifactId>ep-rs-authentication-api</artifactId>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>com.elasticpath.rest.relos.rs.authentication</groupId>
					<artifactId>ep-rs-authentication-client-local</artifactId>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>com.elasticpath.rest.relos.rs.authentication</groupId>
					<artifactId>ep-rs-authentication-handler</artifactId>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>com.elasticpath.rest.relos.rs.authentication</groupId>
					<artifactId>ep-rs-authentication-resource</artifactId>
					<scope>provided</scope>
				</dependency>
				<!-- EP Commerce Integration -->
				<dependency>
					<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
					<artifactId>ep-rs-authentication-epcommerce</artifactId>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
					<artifactId>ep-rs-authentication-spring-oauth2</artifactId>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>com.elasticpath.rest.integration.epcommerce</groupId>
					<artifactId>ep-rs-authentication-spring-oauth2-tokenstore-epcommerce</artifactId>
					<scope>provided</scope>
				</dependency>
			</dependencies>
		</profile>

	</profiles>

	<distributionManagement>
		<repository>
			<id>ep-releases</id>
			<url>${ep.releases.repository.url}</url>
		</repository>
		<snapshotRepository>
			<id>ep-snapshots</id>
			<url>${ep.snapshots.repository.url}</url>
		</snapshotRepository>
	</distributionManagement>
</project>
